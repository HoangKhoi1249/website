<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>B√†i vi·∫øt t·ª± ƒë·ªông</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body { font-family: sans-serif; margin: 40px; }
        .post { padding: 10px; border-bottom: 1px solid #ccc; }
        .pagination a { margin: 5px; text-decoration: none; }
        a { text-decoration: none; color: royalblue; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>üìö Danh s√°ch Post</h1>

    <form method="get">
        <label>L·ªçc theo b·ªô:</label>
        <select name="series" onchange="this.form.submit()">
            <option value="">T·∫•t c·∫£</option>
            {% for series in series_list %}
                <option value="{{ series }}" {% if series == selected_series %}selected{% endif %}>
                    {{ series }}
                </option>
            {% endfor %}
        </select>
    </form>

    {% for post in posts %}
        <div class="post">
            <a href="{{ url_for('post_detail', slug=post['slug']) }}">

                <strong>{{ post['title'] }}</strong>
            </a>
            <i>(B·ªô: {{ post['series'] or 'Ch∆∞a ph√¢n lo·∫°i' }})</i>
        </div>
    {% endfor %}

    <div class="pagination">
        {% if page > 1 %}
            <a href="?page=1&series={{ selected_series }}">¬´</a>
            <a href="?page={{ page - 1 }}&series={{ selected_series }}">Trang tr∆∞·ªõc</a>
        {% endif %}

        {% set start = max(1, page - 2) %}
        {% set end = min(total_pages, page + 2) %}

        {# Hi·ªán 1-3 n·∫øu ·ªü xa #}
        {% if start > 3 %}
            <a href="?page=1&series={{ selected_series }}">1</a>
            <a href="?page=2&series={{ selected_series }}">2</a>
            <a href="?page=3&series={{ selected_series }}">3</a>
            <span>...</span>
        {% endif %}

        {# C√°c trang g·∫ßn hi·ªán t·∫°i #}
        {% for p in range(start, end + 1) %}
            {% if p == page %}
                <strong>[{{ p }}]</strong>
            {% else %}
                <a href="?page={{ p }}&series={{ selected_series }}">{{ p }}</a>
            {% endif %}
        {% endfor %}

        {# Hi·ªán cu·ªëi n·∫øu ·ªü xa #}
        {% if end < total_pages - 2 %}
            <span>...</span>
            <a href="?page={{ total_pages - 2 }}&series={{ selected_series }}">{{ total_pages - 2 }}</a>
            <a href="?page={{ total_pages - 1 }}&series={{ selected_series }}">{{ total_pages - 1 }}</a>
            <a href="?page={{ total_pages }}&series={{ selected_series }}">{{ total_pages }}</a>
        {% endif %}

        {% if page < total_pages %}
            <a href="?page={{ page + 1 }}&series={{ selected_series }}">Ti·∫øp ¬ª</a>
            <a href="?page={{ total_pages }}&series={{ selected_series }}">Trang cu·ªëi ¬ª</a>
        {% endif %}
    </div>



</body>
</html>
